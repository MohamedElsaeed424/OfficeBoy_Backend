generator client {
    provider = "prisma-client-js"
}

datasource db {
    provider = "postgresql"
    url      = env("DATABASE_URL")
}

model UsersTBL {
    userid    Int           @id @default(autoincrement())
    firstname String
    lastname  String
    email     String        @unique
    role      String
    password  String
    Employee  EmployeeTBL[]
}

model OfficeTBL {
    officeid Int           @id @unique @default(autoincrement())
    officeno Int           @unique
    location String
    Employee EmployeeTBL[]
    Order    OrdersTBL[]
}

model RoomTBL {
    roomid   Int           @id @unique @default(autoincrement())
    roomno   Int
    roomname String
    Employee EmployeeTBL[]
    Order    OrdersTBL[]
}

model EmployeeTBL {
    emp      UsersTBL  @relation(fields: [empid], references: [userid])
    empid    Int       @id @unique @default(autoincrement())
    roomid   Int
    romid    RoomTBL   @relation(fields: [roomid], references: [roomid])
    officeid Int
    offid    OfficeTBL @relation(fields: [officeid], references: [officeid])
}

model CategoriesTbl {
    categoryid   Int        @id @unique @default(autoincrement())
    categoryname String     @unique //
    Item         ItemsTBL[]
}

model ItemsTBL {
    categoryid Int
    catid      CategoriesTbl @relation(fields: [categoryid], references: [categoryid])
    itemid     Int           @id @unique @default(autoincrement())
    itemname   String        @unique //
    Order      OrdersTBL[]
}

model OrdersTBL {
    itemid  Int
    itemsid ItemsTBL @relation(fields: [itemid], references: [itemid])
    orderid Int      @id @unique @default(autoincrement())

    officeid Int
    offid    OfficeTBL @relation(fields: [officeid], references: [officeid])

    roomid     Int
    romid      RoomTBL         @relation(fields: [roomid], references: [roomid])
    Orderitems OrderItemsTBL[]
}

model OrderItemsTBL {
    orderitemid Int       @id @unique @default(autoincrement())
    orderid     Int
    ordersid    OrdersTBL @relation(fields: [orderid], references: [orderid])
}

enum RoleEnumType {
    admin
    employee
    officeBoy
}

model BlacklistedToken {
    id        Int      @id @default(autoincrement())
    token     String   @unique
    createdat DateTime @default(now())
}

//commands
//------------
// npx prisma genarate
// npx prisma migrate dev --name init  --create-only => gererate a version of prisma table inside our db  ,geneate prise migration inside out tables
// npx prisma migrate deploy   => deploy ur actual model user
